import{d as $,b as U,w as z,ae as B,Y as Z,o as k,c as I,g as s,u as L,n as g,t as D,a6 as S,r as p,f as e,e as a,I as T,j as o,au as F,z as N,h as P,ah as j,ai as H,av as q,aw as G,a3 as W,ax as X,_ as Y}from"./index-b0f6dbf0.js";import{g as J,c as K,b as O,e as Q,f as ee,a as w}from"./dark-75aa2b45.js";import"./mitt-7f99bbc0.js";const _=$({name:"Motion",props:{delay:{type:Number,default:50}},render(){const{delay:l}=this,d=U("motion");return z(B("div",{},{default:()=>[this.$slots.default()]}),[[d,{initial:{opacity:0,y:100},enter:{opacity:1,y:0,transition:{delay:l}}}]])}}),ae=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)]|[()])+$)(?!^.*[\u4E00-\u9FA5].*$)([^(0-9a-zA-Z)]|[()]|[a-z]|[A-Z]|[0-9]){8,18}$/,te=Z({username:[{required:!0,message:"用户名长度在5-20位之间",min:5,max:20,trigger:"blur"}],password:[{validator:(l,d,u)=>{d===""?u(new Error("请输入密码")):ae.test(d)?u():u(new Error("密码格式应为8-18位数字、字母、符号的任意两种组合"))},trigger:"blur"}]}),oe=""+new URL("../jpg/bg-b4ee2a9c.jpg",import.meta.url).href,se={xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",class:"icon",viewBox:"0 0 1024 1024"},ne=s("path",{fill:"#A86F8D",d:"M875.435 377.365A971.264 971.264 0 0 0 461.803 83.093c-113.259-41.706-237.91 18.24-275.136 133.078a966.144 966.144 0 0 0-47.04 298.56c0 99.093 14.89 194.709 42.538 284.757 34.006 110.848 151.702 173.099 261.547 136a970.496 970.496 0 0 0 429.867-292.736c64.341-76.053 65.152-188.48 1.856-265.387"},null,-1),le=s("path",{fill:"#E7A1C2",d:"m720.533 102.08-53.845 14.57a88.405 88.405 0 0 0-65.28 85.334v158.293a17.707 17.707 0 0 1-22.379 17.11 139.093 139.093 0 0 0-63.573-1.984c-57.707 11.477-102.912 59.52-110.613 117.845a139.712 139.712 0 0 0 148.309 158.336c73.813-5.12 129.707-69.27 129.707-143.253V256.213c0-19.84 13.29-37.205 32.426-42.41l6.827-1.835a41.387 41.387 0 0 0 30.55-39.936v-45.355c0-16.789-15.937-28.992-32.129-24.597"},null,-1),re=[ne,le];function ie(l,d){return k(),I("svg",se,re)}const ce={render:ie},de={width:24,height:24,body:'<path fill="currentColor" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"/>'},ue={width:24,height:24,body:'<path fill="currentColor" d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2Zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12Z"/>'},pe={width:24,height:24,body:'<path fill="currentColor" d="M19.779 4.222a6 6 0 0 1 0 8.485l-2.122 2.12l-4.95 4.951a6 6 0 0 1-8.485-8.485l7.071-7.071a6 6 0 0 1 8.486 0Zm-4.95 10.606L9.172 9.171l-3.536 3.536a4 4 0 1 0 5.657 5.657l3.536-3.536Z"/>'},_e=l=>(j("data-v-64e2fa6b"),l=l(),H(),l),me={class:"select-none"},he=["src"],fe={class:"flex-c absolute right-5 top-3"},ve={class:"login-container"},ge=_e(()=>s("div",{class:"img"},null,-1)),we={class:"login-box"},ye={class:"login-form"},xe={class:"outline-none"},be=["src"],Ce=$({name:"Login",__name:"index",setup(l){const d=L(),u=g(!1),m=g(),{initStorage:A}=J();A();const{dataTheme:h,dataThemeChange:y}=K();y();const{title:E}=O(),n=Z({username:"misaka10032",password:"123456abc",captchaCode:"",captchaId:""}),x=g(""),b=async r=>{if(!r)return;await r.validate(i=>Promise.resolve(i))&&(u.value=!0,q().loginByUsername(n).then(i=>{i!=null&&i.accessToken&&G().then(()=>{d.push(W(!0).path),X("登录成功",{type:"success"})})}).catch(i=>{}).finally(()=>{u.value=!1}))};function C({code:r}){r==="Enter"&&b(m.value)}async function V(){const r=await F();n.captchaId=r.id,x.value=r.imageBase64}return D(()=>{window.document.addEventListener("keypress",C),V()}),S(()=>{window.document.removeEventListener("keypress",C)}),(r,t)=>{const i=p("el-switch"),f=p("el-input"),v=p("el-form-item"),R=p("el-button"),M=p("el-form");return k(),I("div",me,[s("img",{src:e(oe),class:"wave w-full"},null,8,he),s("div",fe,[a(i,{modelValue:e(h),"onUpdate:modelValue":t[0]||(t[0]=c=>T(h)?h.value=c:null),"inline-prompt":"","active-icon":e(Q),"inactive-icon":e(ee),onChange:e(y)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),s("div",ve,[ge,s("div",we,[s("div",ye,[a(e(ce),{class:"avatar"}),a(e(_),null,{default:o(()=>[s("h2",xe,N(e(E)),1)]),_:1}),a(M,{ref_key:"ruleFormRef",ref:m,model:n,rules:e(te),size:"large"},{default:o(()=>[a(e(_),{delay:100},{default:o(()=>[a(v,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:o(()=>[a(f,{clearable:"",modelValue:n.username,"onUpdate:modelValue":t[1]||(t[1]=c=>n.username=c),placeholder:"账号","prefix-icon":e(w)(e(ue))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),a(e(_),{delay:150},{default:o(()=>[a(v,{prop:"password"},{default:o(()=>[a(f,{clearable:"","show-password":"",modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=c=>n.password=c),placeholder:"密码","prefix-icon":e(w)(e(de))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),a(e(_),{delay:200},{default:o(()=>[a(v,{prop:"captchaCode"},{default:o(()=>[a(f,{clearable:"",modelValue:n.captchaCode,"onUpdate:modelValue":t[3]||(t[3]=c=>n.captchaCode=c),placeholder:"验证码","prefix-icon":e(w)(e(pe))},{append:o(()=>[s("img",{src:x.value,alt:"",class:"w-32 h-10 cursor-pointer",onClick:V},null,8,be)]),_:1},8,["modelValue","prefix-icon"])]),_:1})]),_:1}),a(e(_),{delay:250},{default:o(()=>[a(R,{class:"w-full mt-4",size:"default",type:"primary",loading:u.value,onClick:t[4]||(t[4]=c=>b(m.value))},{default:o(()=>[P(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])])}}});const ke=Y(Ce,[["__scopeId","data-v-64e2fa6b"]]);export{ke as default};
