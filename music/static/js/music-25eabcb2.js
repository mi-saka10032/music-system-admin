import{ao as Q,ap as V,aW as k,l as _,e as c,h as P,r as w,F as v,D as x,s as z}from"./index-1e13b2eb.js";import{e as R}from"./mitt-7f99bbc0.js";var j={exports:{}};(function(t,l){(function(f,p){t.exports=p()})(Q,function(){var f,p,M=1e3,D=6e4,S=36e5,T=864e5,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C=31536e6,F=2592e6,I=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,b={years:C,months:F,days:T,hours:S,minutes:D,seconds:M,milliseconds:1,weeks:6048e5},$=function(r){return r instanceof H},y=function(r,s,e){return new H(r,e,s.$l)},g=function(r){return p.p(r)+"s"},U=function(r){return r<0},d=function(r){return U(r)?Math.ceil(r):Math.floor(r)},A=function(r){return Math.abs(r)},h=function(r,s){return r?U(r)?{negative:!0,format:""+A(r)+s}:{negative:!1,format:""+r+s}:{negative:!1,format:""}},H=function(){function r(e,n,i){var o=this;if(this.$d={},this.$l=i,e===void 0&&(this.$ms=0,this.parseFromMilliseconds()),n)return y(e*b[g(n)],this);if(typeof e=="number")return this.$ms=e,this.parseFromMilliseconds(),this;if(typeof e=="object")return Object.keys(e).forEach(function(m){o.$d[g(m)]=e[m]}),this.calMilliseconds(),this;if(typeof e=="string"){var a=e.match(I);if(a){var u=a.slice(2).map(function(m){return m!=null?Number(m):0});return this.$d.years=u[0],this.$d.months=u[1],this.$d.weeks=u[2],this.$d.days=u[3],this.$d.hours=u[4],this.$d.minutes=u[5],this.$d.seconds=u[6],this.calMilliseconds(),this}}return this}var s=r.prototype;return s.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(n,i){return n+(e.$d[i]||0)*b[i]},0)},s.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=d(e/C),e%=C,this.$d.months=d(e/F),e%=F,this.$d.days=d(e/T),e%=T,this.$d.hours=d(e/S),e%=S,this.$d.minutes=d(e/D),e%=D,this.$d.seconds=d(e/M),e%=M,this.$d.milliseconds=e},s.toISOString=function(){var e=h(this.$d.years,"Y"),n=h(this.$d.months,"M"),i=+this.$d.days||0;this.$d.weeks&&(i+=7*this.$d.weeks);var o=h(i,"D"),a=h(this.$d.hours,"H"),u=h(this.$d.minutes,"M"),m=this.$d.seconds||0;this.$d.milliseconds&&(m+=this.$d.milliseconds/1e3);var N=h(m,"S"),W=e.negative||n.negative||o.negative||a.negative||u.negative||N.negative,B=a.format||u.format||N.format?"T":"",Y=(W?"-":"")+"P"+e.format+n.format+o.format+B+a.format+u.format+N.format;return Y==="P"||Y==="-P"?"P0D":Y},s.toJSON=function(){return this.toISOString()},s.format=function(e){var n=e||"YYYY-MM-DDTHH:mm:ss",i={Y:this.$d.years,YY:p.s(this.$d.years,2,"0"),YYYY:p.s(this.$d.years,4,"0"),M:this.$d.months,MM:p.s(this.$d.months,2,"0"),D:this.$d.days,DD:p.s(this.$d.days,2,"0"),H:this.$d.hours,HH:p.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:p.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:p.s(this.$d.seconds,2,"0"),SSS:p.s(this.$d.milliseconds,3,"0")};return n.replace(E,function(o,a){return a||String(i[o])})},s.as=function(e){return this.$ms/b[g(e)]},s.get=function(e){var n=this.$ms,i=g(e);return i==="milliseconds"?n%=1e3:n=i==="weeks"?d(n/b[i]):this.$d[i],n===0?0:n},s.add=function(e,n,i){var o;return o=n?e*b[g(n)]:$(e)?e.$ms:y(e,this).$ms,y(this.$ms+o*(i?-1:1),this)},s.subtract=function(e,n){return this.add(e,n,!0)},s.locale=function(e){var n=this.clone();return n.$l=e,n},s.clone=function(){return y(this.$ms,this)},s.humanize=function(e){return f().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},s.valueOf=function(){return this.asMilliseconds()},s.milliseconds=function(){return this.get("milliseconds")},s.asMilliseconds=function(){return this.as("milliseconds")},s.seconds=function(){return this.get("seconds")},s.asSeconds=function(){return this.as("seconds")},s.minutes=function(){return this.get("minutes")},s.asMinutes=function(){return this.as("minutes")},s.hours=function(){return this.get("hours")},s.asHours=function(){return this.as("hours")},s.days=function(){return this.get("days")},s.asDays=function(){return this.as("days")},s.weeks=function(){return this.get("weeks")},s.asWeeks=function(){return this.as("weeks")},s.months=function(){return this.get("months")},s.asMonths=function(){return this.as("months")},s.years=function(){return this.get("years")},s.asYears=function(){return this.as("years")},r}();return function(r,s,e){f=e,p=e().$utils(),e.duration=function(o,a){var u=e.locale();return y(o,{$l:u},a)},e.isDuration=$;var n=s.prototype.add,i=s.prototype.subtract;s.prototype.add=function(o,a){return $(o)&&(o=o.asMilliseconds()),n.bind(this)(o,a)},s.prototype.subtract=function(o,a){return $(o)&&(o=o.asMilliseconds()),i.bind(this)(o,a)}}})})(j);var G=j.exports;const J=V(G);k.extend(J);const O=(t,l="YYYY-MM-DD")=>{if(t==null)return"";const f=new Date(t);return isNaN(f.getTime())?"":k(t).format(l)},Z=t=>k.duration(t,"seconds").format("mm分ss秒"),q=_({id:"music-admin",state:()=>({singerTableColumns:[{type:"selection"},{label:"歌手名称",prop:"singerName"},{label:"封面图片链接",prop:"coverUrl",cellRenderer:({row:t})=>t.coverUrl?c("img",{src:t.coverUrl,class:"w-24 h-24"},null):c("div",{class:"w-24 h-24"},null)},{label:"歌曲列表",prop:"songs",cellRenderer:({row:t})=>c(w("el-button"),{type:"success",onClick:()=>R.emit("openSingerSongsDialog",t.id)},{default:()=>[P("编辑查看")]})},{label:"操作",fixed:"right",slot:"operation"}],singerFormColumns:[{type:"input",label:"歌手名称",prop:"singerName"},{type:"input",label:"封面图片链接",prop:"coverUrl"}],albumTableColumns:[{type:"selection"},{label:"专辑名称",prop:"albumName"},{label:"专辑图片链接",prop:"coverUrl",cellRenderer:({row:t})=>t.coverUrl?c("img",{src:t.coverUrl,class:"w-24 h-24"},null):c("div",{class:"w-24 h-24"},null)},{label:"发行日期",prop:"publishTime",cellRenderer:({row:t})=>c(v,null,[O(t.publishTime)])},{label:"歌曲列表",prop:"songs",cellRenderer:({row:t})=>c(w("el-button"),{type:"success",onClick:()=>R.emit("openAlbumSongsDialog",t.id)},{default:()=>[P("编辑查看")]})},{label:"操作",fixed:"right",slot:"operation"}],albumQueryFormColumns:[{type:"input",label:"专辑名称",prop:"albumName"},{type:"input",label:"专辑图片链接",prop:"coverUrl"},{type:"date",label:"开始发行日期",prop:"startPublishTime",placeholder:"开始日期"},{type:"date",label:"截止发行日期",prop:"endPublishTime",placeholder:"截止日期"}],albumDetailFormColumns:[{type:"input",label:"专辑名称",prop:"albumName"},{type:"input",label:"专辑图片链接",prop:"coverUrl"},{type:"date",label:"发行日期",prop:"publishTime",placeholder:"发行日期"}],songTableColumns:[{type:"selection"},{label:"歌曲名称",prop:"songName"},{label:"歌词",prop:"lyric",showOverflowTooltip:!0},{label:"链接",prop:"musicUrl"},{label:"所属专辑",prop:"album",cellRenderer:({row:t})=>{var l;return c(v,null,[(l=t.album)==null?void 0:l.albumName])}},{label:"歌手",prop:"singers",cellRenderer:({row:t})=>c("div",{class:"flex flex-wrap"},[t.singers.map(l=>c(w("el-tag"),{class:"min-w-[30%] mr-2 mb-2"},{default:()=>[l.singerName]}))])},{label:"发行日期",prop:"publishTime",cellRenderer:({row:t})=>c(v,null,[O(t.publishTime)])},{label:"歌曲时长",prop:"duration",cellRenderer:({row:t})=>c(v,null,[Z(t.duration)])},{label:"操作",fixed:"right",slot:"operation"}],songQueryFormColumns:[{type:"input",label:"歌曲名称",prop:"songName"},{type:"input",label:"歌词",prop:"lyric"},{type:"input",label:"所属专辑",prop:"albumName"},{type:"input",label:"歌手",prop:"singerName"},{type:"date",label:"开始发行日期",prop:"startPublishTime",placeholder:"开始日期"},{type:"date",label:"截止发行日期",prop:"endPublishTime",placeholder:"截止日期"}],songDetailFormColumns:[{type:"input",label:"歌曲名称",prop:"songName"},{type:"textarea",label:"歌词",prop:"lyric"},{type:"slot",label:"链接",prop:"musicUrl",slot:"ossUpload"},{type:"select",label:"所属专辑",prop:"albumId",options:[],placeholder:"请选择专辑"},{type:"multi_select",label:"歌手",prop:"singerIds",options:[],placeholder:"请选择歌手"},{type:"date",label:"发行日期",prop:"publishTime",placeholder:"发行日期"},{type:"input_number",label:"歌曲时长",prop:"duration"}]}),getters:{songCreateFormColumns:t=>{const l=x(t.songDetailFormColumns);return l.splice(4,1,{type:"select",label:"新增歌手",prop:"singerId",options:[],placeholder:"请选择歌手"}),l},songTemplateCreateFormColumns:t=>{const l=x(t.songDetailFormColumns);return l.splice(3,2,{type:"slot",label:"新增专辑表单",prop:"album",slot:"embedAlbum"},{type:"slot",label:"新增歌手表单",prop:"singer",slot:"embedSinger"}),l},relatedSongsTableColumns:t=>{const l=x(t.songTableColumns);return[...l.slice(1,4),...l.slice(6,9)]}}});function X(){return q(z)}export{X as u};
