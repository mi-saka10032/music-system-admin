import{n as R,Y as W,ao as Z,ap as V,aW as x,l as Q,e as d,h as G,r as w,F as P,D as E,s as J,aV as h}from"./index-7abcff81.js";import{e as O}from"./mitt-7f99bbc0.js";function ne(){const g=R(!1),l=R([]),M=R([]),b=W({currentPage:1,pageSize:10,background:!0,total:0}),S=R([]);function N(){g.value=!0}function Y(){g.value=!1}function I(m){S.value=m.map(c=>c.id)}function D(m,c){b.currentPage=m,typeof c=="function"&&c()}function F(m,c){b.pageSize=m,typeof c=="function"&&c()}function $(){b.currentPage=1,b.pageSize=10}return{ORIGIN_CURRENT_PAGE:1,ORIGIN_PAGE_SIZE:10,loading:g,tableColumns:l,tableData:M,pagination:b,checkedIds:S,openLoading:N,closeLoading:Y,injectCheckedIds:I,handleCurrentPageChange:D,handlePageSizeChange:F,resetPagination:$}}var j={exports:{}};(function(e,a){(function(g,l){e.exports=l()})(Z,function(){var g,l,M=1e3,b=6e4,S=36e5,N=864e5,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I=31536e6,D=2592e6,F=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,$={years:I,months:D,days:N,hours:S,minutes:b,seconds:M,milliseconds:1,weeks:6048e5},m=function(r){return r instanceof A},c=function(r,s,t){return new A(r,t,s.$l)},T=function(r){return l.p(r)+"s"},U=function(r){return r<0},v=function(r){return U(r)?Math.ceil(r):Math.floor(r)},z=function(r){return Math.abs(r)},C=function(r,s){return r?U(r)?{negative:!0,format:""+z(r)+s}:{negative:!1,format:""+r+s}:{negative:!1,format:""}},A=function(){function r(t,n,i){var o=this;if(this.$d={},this.$l=i,t===void 0&&(this.$ms=0,this.parseFromMilliseconds()),n)return c(t*$[T(n)],this);if(typeof t=="number")return this.$ms=t,this.parseFromMilliseconds(),this;if(typeof t=="object")return Object.keys(t).forEach(function(y){o.$d[T(y)]=t[y]}),this.calMilliseconds(),this;if(typeof t=="string"){var u=t.match(F);if(u){var p=u.slice(2).map(function(y){return y!=null?Number(y):0});return this.$d.years=p[0],this.$d.months=p[1],this.$d.weeks=p[2],this.$d.days=p[3],this.$d.hours=p[4],this.$d.minutes=p[5],this.$d.seconds=p[6],this.calMilliseconds(),this}}return this}var s=r.prototype;return s.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(n,i){return n+(t.$d[i]||0)*$[i]},0)},s.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=v(t/I),t%=I,this.$d.months=v(t/D),t%=D,this.$d.days=v(t/N),t%=N,this.$d.hours=v(t/S),t%=S,this.$d.minutes=v(t/b),t%=b,this.$d.seconds=v(t/M),t%=M,this.$d.milliseconds=t},s.toISOString=function(){var t=C(this.$d.years,"Y"),n=C(this.$d.months,"M"),i=+this.$d.days||0;this.$d.weeks&&(i+=7*this.$d.weeks);var o=C(i,"D"),u=C(this.$d.hours,"H"),p=C(this.$d.minutes,"M"),y=this.$d.seconds||0;this.$d.milliseconds&&(y+=this.$d.milliseconds/1e3);var k=C(y,"S"),L=t.negative||n.negative||o.negative||u.negative||p.negative||k.negative,B=u.format||p.format||k.format?"T":"",_=(L?"-":"")+"P"+t.format+n.format+o.format+B+u.format+p.format+k.format;return _==="P"||_==="-P"?"P0D":_},s.toJSON=function(){return this.toISOString()},s.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",i={Y:this.$d.years,YY:l.s(this.$d.years,2,"0"),YYYY:l.s(this.$d.years,4,"0"),M:this.$d.months,MM:l.s(this.$d.months,2,"0"),D:this.$d.days,DD:l.s(this.$d.days,2,"0"),H:this.$d.hours,HH:l.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:l.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:l.s(this.$d.seconds,2,"0"),SSS:l.s(this.$d.milliseconds,3,"0")};return n.replace(Y,function(o,u){return u||String(i[o])})},s.as=function(t){return this.$ms/$[T(t)]},s.get=function(t){var n=this.$ms,i=T(t);return i==="milliseconds"?n%=1e3:n=i==="weeks"?v(n/$[i]):this.$d[i],n===0?0:n},s.add=function(t,n,i){var o;return o=n?t*$[T(n)]:m(t)?t.$ms:c(t,this).$ms,c(this.$ms+o*(i?-1:1),this)},s.subtract=function(t,n){return this.add(t,n,!0)},s.locale=function(t){var n=this.clone();return n.$l=t,n},s.clone=function(){return c(this.$ms,this)},s.humanize=function(t){return g().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},s.valueOf=function(){return this.asMilliseconds()},s.milliseconds=function(){return this.get("milliseconds")},s.asMilliseconds=function(){return this.as("milliseconds")},s.seconds=function(){return this.get("seconds")},s.asSeconds=function(){return this.as("seconds")},s.minutes=function(){return this.get("minutes")},s.asMinutes=function(){return this.as("minutes")},s.hours=function(){return this.get("hours")},s.asHours=function(){return this.as("hours")},s.days=function(){return this.get("days")},s.asDays=function(){return this.as("days")},s.weeks=function(){return this.get("weeks")},s.asWeeks=function(){return this.as("weeks")},s.months=function(){return this.get("months")},s.asMonths=function(){return this.as("months")},s.years=function(){return this.get("years")},s.asYears=function(){return this.as("years")},r}();return function(r,s,t){g=t,l=t().$utils(),t.duration=function(o,u){var p=t.locale();return c(o,{$l:p},u)},t.isDuration=m;var n=s.prototype.add,i=s.prototype.subtract;s.prototype.add=function(o,u){return m(o)&&(o=o.asMilliseconds()),n.bind(this)(o,u)},s.prototype.subtract=function(o,u){return m(o)&&(o=o.asMilliseconds()),i.bind(this)(o,u)}}})})(j);var q=j.exports;const K=V(q);x.extend(K);const H=(e,a="YYYY-MM-DD")=>{if(e==null)return"";const g=new Date(e);return isNaN(g.getTime())?"":x(e).format(a)},X=e=>x.duration(e,"seconds").format("mm分ss秒"),ee=Q({id:"admin-music",state:()=>({singerTableColumns:[{type:"selection"},{label:"歌手名称",prop:"singerName"},{label:"封面图片链接",prop:"coverUrl",cellRenderer:({row:e})=>e.coverUrl?d("img",{src:e.coverUrl,class:"w-24 h-24"},null):d("div",{class:"w-24 h-24"},null)},{label:"歌曲列表",prop:"songs",cellRenderer:({row:e})=>d(w("el-button"),{type:"success",onClick:()=>O.emit("openSingerSongsDialog",e.id)},{default:()=>[G("编辑查看")]})},{label:"操作",fixed:"right",slot:"operation"}],singerFormColumns:[{type:"input",label:"歌手名称",prop:"singerName"},{type:"input",label:"封面图片链接",prop:"coverUrl"}],albumTableColumns:[{type:"selection"},{label:"专辑名称",prop:"albumName"},{label:"专辑图片链接",prop:"coverUrl",cellRenderer:({row:e})=>e.coverUrl?d("img",{src:e.coverUrl,class:"w-24 h-24"},null):d("div",{class:"w-24 h-24"},null)},{label:"发行日期",prop:"publishTime",cellRenderer:({row:e})=>d(P,null,[H(e.publishTime)])},{label:"歌曲列表",prop:"songs",cellRenderer:({row:e})=>d(w("el-button"),{type:"success",onClick:()=>O.emit("openAlbumSongsDialog",e.id)},{default:()=>[G("编辑查看")]})},{label:"操作",fixed:"right",slot:"operation"}],albumQueryFormColumns:[{type:"input",label:"专辑名称",prop:"albumName"},{type:"input",label:"专辑图片链接",prop:"coverUrl"},{type:"date",label:"开始发行日期",prop:"startPublishTime",placeholder:"开始日期"},{type:"date",label:"截止发行日期",prop:"endPublishTime",placeholder:"截止日期"}],albumDetailFormColumns:[{type:"input",label:"专辑名称",prop:"albumName"},{type:"input",label:"专辑图片链接",prop:"coverUrl"},{type:"date",label:"发行日期",prop:"publishTime",placeholder:"发行日期"}],songTableColumns:[{type:"selection"},{label:"歌曲名称",prop:"songName"},{label:"歌词",prop:"lyric",showOverflowTooltip:!0},{label:"链接",prop:"musicUrl"},{label:"所属专辑",prop:"album",cellRenderer:({row:e})=>{var a;return d(P,null,[(a=e.album)==null?void 0:a.albumName])}},{label:"歌手",prop:"singers",cellRenderer:({row:e})=>d("div",{class:"flex flex-wrap"},[e.singers.map(a=>d(w("el-tag"),{class:"min-w-[30%] mr-2 mb-2"},{default:()=>[a.singerName]}))])},{label:"发行日期",prop:"publishTime",cellRenderer:({row:e})=>d(P,null,[H(e.publishTime)])},{label:"歌曲时长",prop:"duration",cellRenderer:({row:e})=>d(P,null,[X(e.duration)])},{label:"操作",fixed:"right",slot:"operation"}],songQueryFormColumns:[{type:"input",label:"歌曲名称",prop:"songName"},{type:"input",label:"歌词",prop:"lyric"},{type:"input",label:"所属专辑",prop:"albumName"},{type:"input",label:"歌手",prop:"singerName"},{type:"date",label:"开始发行日期",prop:"startPublishTime",placeholder:"开始日期"},{type:"date",label:"截止发行日期",prop:"endPublishTime",placeholder:"截止日期"}],songDetailFormColumns:[{type:"input",label:"歌曲名称",prop:"songName"},{type:"textarea",label:"歌词",prop:"lyric"},{type:"input",label:"链接",prop:"musicUrl"},{type:"select",label:"所属专辑",prop:"albumId",options:[],placeholder:"请选择专辑"},{type:"multi_select",label:"歌手",prop:"singerIds",options:[],placeholder:"请选择歌手"},{type:"date",label:"发行日期",prop:"publishTime",placeholder:"发行日期"},{type:"input_number",label:"歌曲时长",prop:"duration"}]}),getters:{songCreateFormColumns:e=>{const a=E(e.songDetailFormColumns);return a.splice(4,1,{type:"select",label:"新增歌手",prop:"singerId",options:[],placeholder:"请选择歌手"}),a},songTemplateCreateFormColumns:e=>{const a=E(e.songDetailFormColumns);return a.splice(3,2,{type:"slot",label:"新增专辑表单",prop:"album",slot:"embedAlbum"},{type:"slot",label:"新增歌手表单",prop:"singer",slot:"embedSinger"}),a},relatedSongsTableColumns:e=>{const a=E(e.songTableColumns);return[...a.slice(1,4),...a.slice(6,9)]}}});function re(){return ee(J)}const f="/song",oe=e=>h.post(`${f}/page`,{data:e}),ie=e=>h.post(`${f}/findById`,{params:{id:e}}),ae=e=>h.post(`${f}/update`,{data:e}),le=e=>h.post(`${f}/create`,{data:e}),ue=e=>h.post(`${f}/delete`,{params:{id:e}}),ce=e=>h.post(`${f}/batchCreate`,{data:e}),pe=e=>h.post(`${f}/pageByAlbumId`,{data:e}),de=e=>h.post(`${f}/pageSingerId`,{data:e}),me=e=>h.post(`${f}/shelveAlbumId`,{data:e}),he=e=>h.post(`${f}/shelveSingerId`,{data:e});export{re as a,de as b,he as c,me as d,le as e,ae as f,pe as g,oe as h,ce as i,ue as j,ie as k,ne as u};
